import{r as l,o as K,a as oe,p as Fe,R as O,f as Te,m as ot,s as Me,Y as ee,b as Ke,y as te,n as de,c as Z,K as re,L as at,d as je,l as it,e as ke,i as we,g as lt,h as ct,j as Be,k as Ve,T as ut,q as he,u as X,x as qe,t as dt,G as pt,v as ft,w as mt,S as q,z as Ne,A as ht,N as bt,B as pe,C as xt,D as gt,E as vt,F as yt,H as jt,I as kt,V as ze,J as wt,M as Nt,O as Rt,P as Ot,Q as St,U as Et,W as At,X as Re,Z as D,_ as _t,$ as Oe,a0 as Ct,a1 as Pt,a2 as $t,a3 as It,a4 as Dt,a5 as Lt,a6 as Ft,a7 as Tt,a8 as Mt,a9 as a,aa as Kt,ab as Bt,ac as Vt,ad as qt,ae as zt,af as Ut}from"./index-BmN12ofi.js";import{F as Ht}from"./FormActionBar-D_R5DSid.js";function Jt(e,s,t){let[r,n]=l.useState(t),o=e!==void 0,i=l.useRef(o),u=l.useRef(!1),c=l.useRef(!1);return o&&!i.current&&!u.current?(u.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&i.current&&!c.current&&(c.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?e:r,K(p=>(o||oe.flushSync(()=>n(p)),s?.(p)))]}function Qt(e){let[s]=l.useState(e);return s}function Ue(e={},s=null,t=[]){for(let[r,n]of Object.entries(e))Je(t,He(s,r),n);return t}function He(e,s){return e?e+"["+s+"]":s}function Je(e,s,t){if(Array.isArray(t))for(let[r,n]of t.entries())Je(e,He(s,r.toString()),n);else t instanceof Date?e.push([s,t.toISOString()]):typeof t=="boolean"?e.push([s,t?"1":"0"]):typeof t=="string"?e.push([s,t]):typeof t=="number"?e.push([s,`${t}`]):t==null?e.push([s,""]):Wt(t)&&!l.isValidElement(t)&&Ue(t,s,e)}function Gt(e){var s,t;let r=(s=e?.form)!=null?s:e.closest("form");if(r){for(let n of r.elements)if(n!==e&&(n.tagName==="INPUT"&&n.type==="submit"||n.tagName==="BUTTON"&&n.type==="submit"||n.nodeName==="INPUT"&&n.type==="image")){n.click();return}(t=r.requestSubmit)==null||t.call(r)}}function Wt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let s=Object.getPrototypeOf(e);return s===null||Object.getPrototypeOf(s)===null}let Yt=l.createContext(null);function Zt({children:e}){let s=l.useContext(Yt);if(!s)return O.createElement(O.Fragment,null,e);let{target:t}=s;return t?oe.createPortal(O.createElement(O.Fragment,null,e),t):null}function Xt({data:e,form:s,disabled:t,onReset:r,overrides:n}){let[o,i]=l.useState(null),u=Fe();return l.useEffect(()=>{if(r&&o)return u.addEventListener(o,"reset",r)},[o,s,r]),O.createElement(Zt,null,O.createElement(er,{setForm:i,formId:s}),Ue(e).map(([c,p])=>O.createElement(Te,{features:Me.Hidden,...ot({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:s,disabled:t,name:c,value:p,...n})})))}function er({setForm:e,formId:s}){return l.useEffect(()=>{if(s){let t=document.getElementById(s);t&&e(t)}},[e,s]),s?null:O.createElement(Te,{features:Me.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let r=t.closest("form");r&&e(r)}})}let tr=l.createContext(void 0);function Qe(){return l.useContext(tr)}let fe=l.createContext(null);fe.displayName="LabelContext";function Ge(){let e=l.useContext(fe);if(e===null){let s=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(s,Ge),s}return e}function We(e){var s,t,r;let n=(t=(s=l.useContext(fe))==null?void 0:s.value)!=null?t:void 0;return((r=e?.length)!=null?r:0)>0?[n,...e].filter(Boolean).join(" "):n}function rr({inherit:e=!1}={}){let s=We(),[t,r]=l.useState([]),n=e?[s,...t].filter(Boolean):t;return[n.length>0?n.join(" "):void 0,l.useMemo(()=>function(o){let i=K(c=>(r(p=>[...p,c]),()=>r(p=>{let b=p.slice(),j=b.indexOf(c);return j!==-1&&b.splice(j,1),b}))),u=l.useMemo(()=>({register:i,slot:o.slot,name:o.name,props:o.props,value:o.value}),[i,o.slot,o.name,o.props,o.value]);return O.createElement(fe.Provider,{value:u},o.children)},[r])]}let sr="label";function nr(e,s){var t;let r=l.useId(),n=Ge(),o=Qe(),i=Ke(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((t=n.props)==null?void 0:t.htmlFor),passive:p=!1,...b}=e,j=te(s);de(()=>n.register(u),[u,n.register]);let m=K(_=>{let C=_.currentTarget;if(!(_.target!==_.currentTarget&&at(_.target))&&(je(C)&&_.preventDefault(),n.props&&"onClick"in n.props&&typeof n.props.onClick=="function"&&n.props.onClick(_),je(C))){let y=document.getElementById(C.htmlFor);if(y){let $=y.getAttribute("disabled");if($==="true"||$==="")return;let E=y.getAttribute("aria-disabled");if(E==="true"||E==="")return;(it(y)&&(y.type==="file"||y.type==="radio"||y.type==="checkbox")||y.role==="radio"||y.role==="checkbox"||y.role==="switch")&&y.click(),y.focus({preventScroll:!0})}}}),d=Z({...n.slot,disabled:i||!1}),R={ref:j,...n.props,id:u,htmlFor:c,onClick:m};return p&&("onClick"in R&&(delete R.htmlFor,delete R.onClick),"onClick"in b&&delete b.onClick),re()({ourProps:R,theirProps:b,slot:d,defaultTag:c?sr:"div",name:n.name||"Label"})}let or=ee(nr),ar=Object.assign(or,{});function ir(e,s){return e!==null&&s!==null&&typeof e=="object"&&typeof s=="object"&&"id"in e&&"id"in s?e.id===s.id:e===s}function lr(e=ir){return l.useCallback((s,t)=>{if(typeof e=="string"){let r=e;return s?.[r]===t?.[r]}return e(s,t)},[e])}var Ye=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Ye||{});function cr(e){let s=l.useRef(null),t=K(n=>{s.current=n.pointerType,!ke(n.currentTarget)&&n.pointerType==="mouse"&&n.button===Ye.Left&&(n.preventDefault(),e(n))}),r=K(n=>{s.current!=="mouse"&&(ke(n.currentTarget)||e(n))});return{onPointerDown:t,onClick:r}}var ur=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(ur||{});const ie={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},dr=200,Se=5;function pr(e,{trigger:s,action:t,close:r,select:n}){let o=l.useRef(null),i=l.useRef(null),u=l.useRef(null);we(e&&s!==null,"pointerdown",c=>{lt(c?.target)&&s!=null&&s.contains(c.target)&&(i.current=c.x,u.current=c.y,o.current=c.timeStamp)}),we(e&&s!==null,"pointerup",c=>{var p,b;let j=o.current;if(j===null||(o.current=null,!ct(c.target))||Math.abs(c.x-((p=i.current)!=null?p:c.x))<Se&&Math.abs(c.y-((b=u.current)!=null?b:c.y))<Se)return;let m=t(c);switch(m.kind){case 0:return;case 1:{c.timeStamp-j>dr&&(n(m.target),r());break}case 2:{r();break}}},{capture:!0})}function Ee(e){return[e.screenX,e.screenY]}function fr(){let e=l.useRef([-1,-1]);return{wasMoved(s){let t=Ee(s);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(s){e.current=Ee(s)}}}function mr({children:e,freeze:s},t){let r=Ze(s,e);return l.isValidElement(r)?l.cloneElement(r,{ref:t}):O.createElement(O.Fragment,null,r)}O.forwardRef(mr);function Ze(e,s){let[t,r]=l.useState(s);return!e&&t!==s&&r(s),e?t:s}function hr(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function le(e,s){let t=s.resolveItems();if(t.length<=0)return null;let r=s.resolveActiveIndex(),n=r??-1;switch(e.focus){case 0:{for(let o=0;o<t.length;++o)if(!s.resolveDisabled(t[o],o,t))return o;return r}case 1:{n===-1&&(n=t.length);for(let o=n-1;o>=0;--o)if(!s.resolveDisabled(t[o],o,t))return o;return r}case 2:{for(let o=n+1;o<t.length;++o)if(!s.resolveDisabled(t[o],o,t))return o;return r}case 3:{for(let o=t.length-1;o>=0;--o)if(!s.resolveDisabled(t[o],o,t))return o;return r}case 4:{for(let o=0;o<t.length;++o)if(s.resolveId(t[o],o,t)===e.id)return o;return r}case 5:return null;default:hr(e)}}const ce={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Xe(e){let s=e.getBoundingClientRect();return`${s.x},${s.y}`}function br(e,s,t){let r=Be();if(s.kind==="Tracked"){let n=function(){o!==Xe(e)&&(r.dispose(),t())},{position:o}=s,i=new ResizeObserver(n);i.observe(e),r.add(()=>i.disconnect()),r.addEventListener(window,"scroll",n,{passive:!0}),r.addEventListener(window,"resize",n)}return()=>r.dispose()}let Ae=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function _e(e){var s,t;let r=(s=e.innerText)!=null?s:"",n=e.cloneNode(!0);if(!Ve(n))return r;let o=!1;for(let u of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let i=o?(t=n.innerText)!=null?t:"":r;return Ae.test(i)&&(i=i.replace(Ae,"")),i}function xr(e){let s=e.getAttribute("aria-label");if(typeof s=="string")return s.trim();let t=e.getAttribute("aria-labelledby");if(t){let r=t.split(" ").map(n=>{let o=document.getElementById(n);if(o){let i=o.getAttribute("aria-label");return typeof i=="string"?i.trim():_e(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return _e(e).trim()}function gr(e){let s=l.useRef(""),t=l.useRef("");return K(()=>{let r=e.current;if(!r)return"";let n=r.innerText;if(s.current===n)return t.current;let o=xr(r).trim().toLowerCase();return s.current=n,t.current=o,o})}var vr=Object.defineProperty,yr=(e,s,t)=>s in e?vr(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Ce=(e,s,t)=>(yr(e,typeof s!="symbol"?s+"":s,t),t),T=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(T||{}),Y=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Y||{}),ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ue||{}),et=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.SelectOption=5]="SelectOption",e[e.RegisterOptions=6]="RegisterOptions",e[e.UnregisterOptions=7]="UnregisterOptions",e[e.SetButtonElement=8]="SetButtonElement",e[e.SetOptionsElement=9]="SetOptionsElement",e[e.SortOptions=10]="SortOptions",e[e.MarkButtonAsMoved=11]="MarkButtonAsMoved",e))(et||{});function Pe(e,s=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=pt(s(e.options.slice()),o=>o.dataRef.current.domRef.current),n=t?r.indexOf(t):null;return n===-1&&(n=null),{options:r,activeOptionIndex:n}}let jr={1(e){if(e.dataRef.current.disabled||e.listboxState===1)return e;let s=e.buttonElement?ce.Tracked(Xe(e.buttonElement)):e.buttonPositionState;return{...e,activeOptionIndex:null,pendingFocus:{focus:S.Nothing},listboxState:1,__demoMode:!1,buttonPositionState:s}},0(e,s){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,n=e.options.findIndex(o=>r(o.dataRef.current.value));return n!==-1&&(t=n),{...e,frozenValue:!1,pendingFocus:s.focus,listboxState:0,activeOptionIndex:t,__demoMode:!1,buttonPositionState:ce.Idle}},2(e,s){var t,r,n,o,i;if(e.dataRef.current.disabled||e.listboxState===1)return e;let u={...e,searchQuery:"",activationTrigger:(t=s.trigger)!=null?t:1,__demoMode:!1};if(s.focus===S.Nothing)return{...u,activeOptionIndex:null};if(s.focus===S.Specific)return{...u,activeOptionIndex:e.options.findIndex(b=>b.id===s.id)};if(s.focus===S.Previous){let b=e.activeOptionIndex;if(b!==null){let j=e.options[b].dataRef.current.domRef,m=le(s,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(m!==null){let d=e.options[m].dataRef.current.domRef;if(((r=j.current)==null?void 0:r.previousElementSibling)===d.current||((n=d.current)==null?void 0:n.previousElementSibling)===null)return{...u,activeOptionIndex:m}}}}else if(s.focus===S.Next){let b=e.activeOptionIndex;if(b!==null){let j=e.options[b].dataRef.current.domRef,m=le(s,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(m!==null){let d=e.options[m].dataRef.current.domRef;if(((o=j.current)==null?void 0:o.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...u,activeOptionIndex:m}}}}let c=Pe(e),p=le(s,{resolveItems:()=>c.options,resolveActiveIndex:()=>c.activeOptionIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.current.disabled});return{...u,...c,activeOptionIndex:p}},3:(e,s)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,r=e.searchQuery+s.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(i=>{var u;return!i.dataRef.current.disabled&&((u=i.dataRef.current.textValue)==null?void 0:u.startsWith(r))}),o=n?e.options.indexOf(n):-1;return o===-1||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5(e){return e.dataRef.current.mode===0?{...e,frozenValue:!0}:{...e}},6:(e,s)=>{let t=e.options.concat(s.options),r=e.activeOptionIndex;if(e.pendingFocus.focus!==S.Nothing&&(r=le(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled})),e.activeOptionIndex===null){let{isSelected:n}=e.dataRef.current;if(n){let o=t.findIndex(i=>n?.(i.dataRef.current.value));o!==-1&&(r=o)}}return{...e,options:t,activeOptionIndex:r,pendingFocus:{focus:S.Nothing},pendingShouldSort:!0}},7:(e,s)=>{let t=e.options,r=[],n=new Set(s.options);for(let[o,i]of t.entries())if(n.has(i.id)&&(r.push(o),n.delete(i.id),n.size===0))break;if(r.length>0){t=t.slice();for(let o of r.reverse())t.splice(o,1)}return{...e,options:t,activationTrigger:1}},8:(e,s)=>e.buttonElement===s.element?e:{...e,buttonElement:s.element},9:(e,s)=>e.optionsElement===s.element?e:{...e,optionsElement:s.element},10:e=>e.pendingShouldSort?{...e,...Pe(e),pendingShouldSort:!1}:e,11(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:ce.Moved}}};class ve extends ut{constructor(s){super(s),Ce(this,"actions",{onChange:t=>{let{onChange:r,compare:n,mode:o,value:i}=this.state.dataRef.current;return X(o,{0:()=>r?.(t),1:()=>{let u=i.slice(),c=u.findIndex(p=>n(p,t));return c===-1?u.push(t):u.splice(c,1),r?.(u)}})},registerOption:he(()=>{let t=[],r=new Set;return[(n,o)=>{r.has(o)||(r.add(o),t.push({id:n,dataRef:o}))},()=>(r.clear(),this.send({type:6,options:t.splice(0)}))]}),unregisterOption:he(()=>{let t=[];return[r=>t.push(r),()=>{this.send({type:7,options:t.splice(0)})}]}),goToOption:he(()=>{let t=null;return[(r,n)=>{t={type:2,...r,trigger:n}},()=>t&&this.send(t)]}),closeListbox:()=>{this.send({type:1})},openListbox:t=>{this.send({type:0,focus:t})},selectActiveOption:()=>{var t;if(this.state.activeOptionIndex!==null){let{dataRef:r}=this.state.options[this.state.activeOptionIndex];this.actions.selectOption(r.current.value)}else this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(t=this.state.buttonElement)==null||t.focus({preventScroll:!0}))},selectOption:t=>{this.send({type:5,value:t})},search:t=>{this.send({type:3,value:t})},clearSearch:()=>{this.send({type:4})},setButtonElement:t=>{this.send({type:8,element:t})},setOptionsElement:t=>{this.send({type:9,element:t})}}),Ce(this,"selectors",{activeDescendantId(t){var r;let n=t.activeOptionIndex,o=t.options;return n===null||(r=o[n])==null?void 0:r.id},isActive(t,r){var n;let o=t.activeOptionIndex,i=t.options;return o!==null?((n=i[o])==null?void 0:n.id)===r:!1},hasFrozenValue(t){return t.frozenValue},shouldScrollIntoView(t,r){return t.__demoMode||t.listboxState!==0||t.activationTrigger===0?!1:this.isActive(t,r)},didButtonMove(t){return t.buttonPositionState.kind==="Moved"}}),this.on(6,()=>{requestAnimationFrame(()=>{this.send({type:10})})});{let t=this.state.id,r=qe.get(null);this.disposables.add(r.on(dt.Push,n=>{!r.selectors.isTop(n,t)&&this.state.listboxState===0&&this.actions.closeListbox()})),this.on(0,()=>r.actions.push(t)),this.on(1,()=>r.actions.pop(t))}this.disposables.group(t=>{this.on(1,r=>{r.buttonElement&&(t.dispose(),t.add(br(r.buttonElement,r.buttonPositionState,()=>{this.send({type:11})})))})}),this.on(5,(t,r)=>{var n;this.actions.onChange(r.value),this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(n=this.state.buttonElement)==null||n.focus({preventScroll:!0}))})}static new({id:s,__demoMode:t=!1}){return new ve({id:s,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:S.Nothing},frozenValue:!1,__demoMode:t,buttonPositionState:ce.Idle})}reduce(s,t){return X(t.type,jr,s,t)}}const tt=l.createContext(null);function ye(e){let s=l.useContext(tt);if(s===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,rt),t}return s}function rt({id:e,__demoMode:s=!1}){let t=l.useMemo(()=>ve.new({id:e,__demoMode:s}),[]);return ft(()=>t.dispose()),t}let me=l.createContext(null);me.displayName="ListboxDataContext";function ae(e){let s=l.useContext(me);if(s===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ae),t}return s}let kr=l.Fragment;function wr(e,s){let t=l.useId(),r=Ke(),{value:n,defaultValue:o,form:i,name:u,onChange:c,by:p,invalid:b=!1,disabled:j=r||!1,horizontal:m=!1,multiple:d=!1,__demoMode:R=!1,..._}=e;const C=m?"horizontal":"vertical";let y=te(s),$=Qt(o),[E=d?[]:void 0,M]=Jt(n,c,$),P=rt({id:t,__demoMode:R}),z=l.useRef({static:!1,hold:!1}),k=l.useRef(new Map),B=lr(p),H=l.useCallback(g=>X(v.mode,{[Y.Multi]:()=>E.some(V=>B(V,g)),[Y.Single]:()=>B(E,g)}),[E]),v=Z({value:E,disabled:j,invalid:b,mode:d?Y.Multi:Y.Single,orientation:C,onChange:M,compare:B,isSelected:H,optionsPropsRef:z,listRef:k});de(()=>{P.state.dataRef.current=v},[v]);let L=q(P,g=>g.listboxState),U=qe.get(null),W=q(U,l.useCallback(g=>U.selectors.isTop(g,t),[U,t])),[J,w]=q(P,g=>[g.buttonElement,g.optionsElement]);St(W,[J,w],(g,V)=>{P.send({type:et.CloseListbox}),Ct(V,Pt.Loose)||(g.preventDefault(),J?.focus())});let h=Z({open:L===T.Open,disabled:j,invalid:b,value:E}),[N,F]=rr({inherit:!0}),A={ref:y},x=l.useCallback(()=>{if($!==void 0)return M?.($)},[M,$]),I=re();return O.createElement(F,{value:N,props:{htmlFor:J?.id},slot:{open:L===T.Open,disabled:j}},O.createElement(Et,null,O.createElement(tt.Provider,{value:P},O.createElement(me.Provider,{value:v},O.createElement(At,{value:X(L,{[T.Open]:pe.Open,[T.Closed]:pe.Closed})},u!=null&&E!=null&&O.createElement(Xt,{disabled:j,data:{[u]:E},form:i,onReset:x}),I({ourProps:A,theirProps:_,slot:h,defaultTag:kr,name:"Listbox"}))))))}let Nr="button";function Rr(e,s){let t=l.useId(),r=Qe(),n=ae("Listbox.Button"),o=ye("Listbox.Button"),{id:i=r||`headlessui-listbox-button-${t}`,disabled:u=n.disabled||!1,autoFocus:c=!1,...p}=e,b=te(s,$t(),o.actions.setButtonElement),j=It(),[m,d,R]=q(o,w=>[w.listboxState,w.buttonElement,w.optionsElement]),_=m===T.Open;pr(_,{trigger:d,action:l.useCallback(w=>{if(d!=null&&d.contains(w.target))return ie.Ignore;let h=w.target.closest('[role="option"]:not([data-disabled])');return Ve(h)?ie.Select(h):R!=null&&R.contains(w.target)?ie.Ignore:ie.Close},[d,R]),close:o.actions.closeListbox,select:o.actions.selectActiveOption});let C=K(w=>{switch(w.key){case D.Enter:Gt(w.currentTarget);break;case D.Space:case D.ArrowDown:w.preventDefault(),o.actions.openListbox({focus:n.value?S.Nothing:S.First});break;case D.ArrowUp:w.preventDefault(),o.actions.openListbox({focus:n.value?S.Nothing:S.Last});break}}),y=K(w=>{switch(w.key){case D.Space:w.preventDefault();break}}),$=cr(w=>{var h;o.state.listboxState===T.Open?(oe.flushSync(()=>o.actions.closeListbox()),(h=o.state.buttonElement)==null||h.focus({preventScroll:!0})):(w.preventDefault(),o.actions.openListbox({focus:S.Nothing}))}),E=K(w=>w.preventDefault()),M=We([i]),P=Dt(),{isFocusVisible:z,focusProps:k}=Lt({autoFocus:c}),{isHovered:B,hoverProps:H}=Ft({isDisabled:u}),{pressed:v,pressProps:L}=Tt({disabled:u}),U=Z({open:m===T.Open,active:v||m===T.Open,disabled:u,invalid:n.invalid,value:n.value,hover:B,focus:z,autofocus:c}),W=q(o,w=>w.listboxState===T.Open),J=ze(j(),{ref:b,id:i,type:Mt(e,d),"aria-haspopup":"listbox","aria-controls":R?.id,"aria-expanded":W,"aria-labelledby":M,"aria-describedby":P,disabled:u||void 0,autoFocus:c,onKeyDown:C,onKeyUp:y,onKeyPress:E},$,k,H,L);return re()({ourProps:J,theirProps:p,slot:U,defaultTag:Nr,name:"Listbox.Button"})}let st=l.createContext(!1),Or="div",Sr=Re.RenderStrategy|Re.Static;function Er(e,s){let t=l.useId(),{id:r=`headlessui-listbox-options-${t}`,anchor:n,portal:o=!1,modal:i=!0,transition:u=!1,...c}=e,p=mt(n),[b,j]=l.useState(null);p&&(o=!0);let m=ae("Listbox.Options"),d=ye("Listbox.Options"),[R,_,C,y]=q(d,f=>[f.listboxState,f.buttonElement,f.optionsElement,f.__demoMode]),$=Ne(_),E=Ne(C),M=ht(),[P,z]=bt(u,b,M!==null?(M&pe.Open)===pe.Open:R===T.Open);xt(P,_,d.actions.closeListbox);let k=y?!1:i&&R===T.Open;gt(k,E);let B=y?!1:i&&R===T.Open;vt(B,{allowed:l.useCallback(()=>[_,C],[_,C])});let H=q(d,d.selectors.didButtonMove)?!1:P,v=q(d,d.selectors.hasFrozenValue)&&!e.static,L=Ze(v,m.value),U=l.useCallback(f=>m.compare(L,f),[m.compare,L]),W=q(d,f=>{var G;if(p==null||!((G=p?.to)!=null&&G.includes("selection")))return null;let ne=f.options.findIndex(nt=>U(nt.dataRef.current.value));return ne===-1&&(ne=0),ne}),J=(()=>{if(p==null)return;if(W===null)return{...p,inner:void 0};let f=Array.from(m.listRef.current.values());return{...p,inner:{listRef:{current:f},index:W}}})(),[w,h]=yt(J),N=jt(),F=te(s,p?w:null,d.actions.setOptionsElement,j),A=Fe();l.useEffect(()=>{let f=C;f&&R===T.Open&&(kt(f)||f==null||f.focus({preventScroll:!0}))},[R,C]);let x=K(f=>{var G;switch(A.dispose(),f.key){case D.Space:if(d.state.searchQuery!=="")return f.preventDefault(),f.stopPropagation(),d.actions.search(f.key);case D.Enter:f.preventDefault(),f.stopPropagation(),d.actions.selectActiveOption();break;case X(m.orientation,{vertical:D.ArrowDown,horizontal:D.ArrowRight}):return f.preventDefault(),f.stopPropagation(),d.actions.goToOption({focus:S.Next});case X(m.orientation,{vertical:D.ArrowUp,horizontal:D.ArrowLeft}):return f.preventDefault(),f.stopPropagation(),d.actions.goToOption({focus:S.Previous});case D.Home:case D.PageUp:return f.preventDefault(),f.stopPropagation(),d.actions.goToOption({focus:S.First});case D.End:case D.PageDown:return f.preventDefault(),f.stopPropagation(),d.actions.goToOption({focus:S.Last});case D.Escape:f.preventDefault(),f.stopPropagation(),oe.flushSync(()=>d.actions.closeListbox()),(G=d.state.buttonElement)==null||G.focus({preventScroll:!0});return;case D.Tab:f.preventDefault(),f.stopPropagation(),oe.flushSync(()=>d.actions.closeListbox()),_t(d.state.buttonElement,f.shiftKey?Oe.Previous:Oe.Next);break;default:f.key.length===1&&(d.actions.search(f.key),A.setTimeout(()=>d.actions.clearSearch(),350));break}}),I=q(d,f=>{var G;return(G=f.buttonElement)==null?void 0:G.id}),g=Z({open:R===T.Open}),V=ze(p?N():{},{id:r,ref:F,"aria-activedescendant":q(d,d.selectors.activeDescendantId),"aria-multiselectable":m.mode===Y.Multi?!0:void 0,"aria-labelledby":I,"aria-orientation":m.orientation,onKeyDown:x,role:"listbox",tabIndex:R===T.Open?0:void 0,style:{...c.style,...h,"--button-width":Nt(P,_,!0).width},...wt(z)}),se=re(),Q=l.useMemo(()=>m.mode===Y.Multi?m:{...m,isSelected:U},[m,U]);return O.createElement(Rt,{enabled:o?e.static||P:!1,ownerDocument:$},O.createElement(me.Provider,{value:Q},se({ourProps:V,theirProps:c,slot:g,defaultTag:Or,features:Sr,visible:H,name:"Listbox.Options"})))}let Ar="div";function _r(e,s){let t=l.useId(),{id:r=`headlessui-listbox-option-${t}`,disabled:n=!1,value:o,...i}=e,u=l.useContext(st)===!0,c=ae("Listbox.Option"),p=ye("Listbox.Option"),b=q(p,v=>p.selectors.isActive(v,r)),j=c.isSelected(o),m=l.useRef(null),d=gr(m),R=Ot({disabled:n,value:o,domRef:m,get textValue(){return d()}}),_=te(s,m,v=>{v?c.listRef.current.set(r,v):c.listRef.current.delete(r)}),C=q(p,v=>p.selectors.shouldScrollIntoView(v,r));de(()=>{if(C)return Be().requestAnimationFrame(()=>{var v,L;(L=(v=m.current)==null?void 0:v.scrollIntoView)==null||L.call(v,{block:"nearest"})})},[C,m]),de(()=>{if(!u)return p.actions.registerOption(r,R),()=>p.actions.unregisterOption(r)},[R,r,u]);let y=K(v=>{if(n)return v.preventDefault();p.actions.selectOption(o)}),$=K(()=>{if(n)return p.actions.goToOption({focus:S.Nothing});p.actions.goToOption({focus:S.Specific,id:r})}),E=fr(),M=K(v=>E.update(v)),P=K(v=>{E.wasMoved(v)&&(n||b&&p.state.activationTrigger===ue.Pointer||p.actions.goToOption({focus:S.Specific,id:r},ue.Pointer))}),z=K(v=>{E.wasMoved(v)&&(n||b&&p.state.activationTrigger===ue.Pointer&&p.actions.goToOption({focus:S.Nothing}))}),k=Z({active:b,focus:b,selected:j,disabled:n,selectedOption:j&&u}),B=u?{}:{id:r,ref:_,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":j,disabled:void 0,onClick:y,onFocus:$,onPointerEnter:M,onMouseEnter:M,onPointerMove:P,onMouseMove:P,onPointerLeave:z,onMouseLeave:z},H=re();return!j&&u?null:H({ourProps:B,theirProps:i,slot:k,defaultTag:Ar,name:"Listbox.Option"})}let Cr=l.Fragment;function Pr(e,s){let{options:t,placeholder:r,...n}=e,o={ref:te(s)},i=ae("ListboxSelectedOption"),u=Z({}),c=i.value===void 0||i.value===null||i.mode===Y.Multi&&Array.isArray(i.value)&&i.value.length===0,p=re();return O.createElement(st.Provider,{value:!0},p({ourProps:o,theirProps:{...n,children:O.createElement(O.Fragment,null,r&&c?r:t)},slot:u,defaultTag:Cr,name:"ListboxSelectedOption"}))}let $r=ee(wr),be=ee(Rr),Ir=ar,xe=ee(Er),ge=ee(_r),Dr=ee(Pr),$e=Object.assign($r,{Button:be,Label:Ir,Options:xe,Option:ge,SelectedOption:Dr});function Lr({title:e,titleId:s,...t},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},t),e?l.createElement("title",{id:s},e):null,l.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const Ie=l.forwardRef(Lr),Fr={department:"",jobPurpose:"",reportingRelationships:{primary:"",secondary:"",tertiary:""},levelsOfAuthority:{lineAuthority:"",staffAuthority:""},jobSpecifications:{educationalBackground:"",licenseRequirement:"",workExperience:""},kras:[]};function Tr(e,s){switch(s.type){case"INIT":return{...e,...s.payload};case"UPDATE_FIELD":{const{section:t,field:r,value:n}=s.payload;return t?{...e,[t]:{...e[t],[r]:n}}:{...e,[r]:n}}case"ADD_KRA":return{...e,kras:[...e.kras,{subfunction:null,kraId:null,kra:"",description:"",profile_kra:[]}]};case"REMOVE_KRA":return{...e,kras:e.kras.filter((t,r)=>r!==s.index)};case"UPDATE_KRA_FIELD":{const{index:t,field:r,value:n}=s;return{...e,kras:e.kras.map((o,i)=>i!==t?o:r==="subfunction"?{...o,subfunction:n,kraId:null,kra:"",description:""}:{...o,[r]:n})}}case"ADD_PROFILE_KRA":return{...e,kras:e.kras.map((t,r)=>r===s.kraIndex?{...t,profile_kra:[...t.profile_kra,{kra_description:"",description:""}]}:t)};case"REMOVE_PROFILE_KRA":{const{kraIndex:t,profileIndex:r}=s;return{...e,kras:e.kras.map((n,o)=>o===t?{...n,profile_kra:n.profile_kra.filter((i,u)=>u!==r)}:n)}}case"UPDATE_PROFILE_KRA_FIELD":{const{kraIndex:t,profileIndex:r,field:n,value:o}=s;return{...e,kras:e.kras.map((i,u)=>u===t?{...i,profile_kra:i.profile_kra.map((c,p)=>p===r?{...c,[n]:o}:c)}:i)}}case"SET_KRA_FROM_SELECTION":{const{index:t,selectedKra:r}=s;return{...e,kras:e.kras.map((n,o)=>o===t?{...n,kraId:r?.id||null,kra:r?.kra||"",description:r?.kra_description||""}:n)}}default:return e}}function Mr({title:e,titleId:s,...t},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},t),e?l.createElement("title",{id:s},e):null,l.createElement("path",{fillRule:"evenodd",d:"M5.22 10.22a.75.75 0 0 1 1.06 0L8 11.94l1.72-1.72a.75.75 0 1 1 1.06 1.06l-2.25 2.25a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 0 1 0-1.06ZM10.78 5.78a.75.75 0 0 1-1.06 0L8 4.06 6.28 5.78a.75.75 0 0 1-1.06-1.06l2.25-2.25a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}))}const De=l.forwardRef(Mr);function Kr({kras:e,subfunctions:s,dispatch:t,setOpenConfirm:r}){return a.jsx("div",{className:"space-y-4 mb-6",children:e.map((n,o)=>a.jsxs("div",{className:"bg-white border border-gray-200 shadow-xl rounded-lg py-4 px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-800",children:["KRA #",o+1]}),a.jsx("button",{type:"button",onClick:()=>r({open:!0,title:"Remove KRA",message:"This will remove the KRA and all its details. Do you want to continue?",onConfirm:()=>t({type:"REMOVE_KRA",index:o})}),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove KRA"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm/6 font-medium text-gray-700 mb-2",children:"Subfunction"}),a.jsx("div",{className:"relative mt-2",children:a.jsxs($e,{value:n.subfunction,onChange:i=>t({type:"UPDATE_KRA_FIELD",index:o,field:"subfunction",value:i}),children:[a.jsxs(be,{className:"grid w-full cursor-default grid-cols-1 rounded-md bg-white border border-gray-300 py-2 pr-2 pl-3 text-left text-gray-900 shadow-sm focus-visible:outline-none focus:ring focus:ring-[#ee3124] focus:border-[#ee3124] sm:text-sm/6",children:[a.jsx("span",{className:"col-start-1 row-start-1 flex items-center gap-3 pr-6",children:a.jsx("span",{className:"block truncate",children:n?.subfunction?.name||"Select a subfunction"})}),a.jsx(De,{"aria-hidden":"true",className:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-400 sm:size-4"})]}),a.jsx(xe,{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base border border-gray-200 shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:s.map(i=>a.jsxs(ge,{value:i,className:"group relative cursor-default py-2 pr-9 pl-3 text-gray-900 select-none data-focus:bg-red-50 data-focus:outline-none",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"ml-3 block truncate font-normal group-data-selected:font-semibold group-data-selected:text-[#ee3124]",children:i.name})}),a.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-[#ee3124] group-not-data-selected:hidden group-data-focus:text-[#ee3124]",children:a.jsx(Ie,{"aria-hidden":"true",className:"size-5"})})]},i.id))})]})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm/6 font-medium text-gray-700 mb-2",children:"KRA Name"}),a.jsx("div",{className:"relative mt-2",children:a.jsxs($e,{value:n.kraId,onChange:i=>{const u=n.subfunction?.job_profile_kras?.find(c=>c.id===i);t({type:"SET_KRA_FROM_SELECTION",index:o,selectedKra:u})},disabled:!n.subfunction,children:[a.jsxs(be,{className:`grid w-full cursor-default grid-cols-1 rounded-md bg-white border border-gray-300 py-2 pr-2 pl-3 text-left text-gray-900 shadow-sm focus-visible:outline-none focus:ring focus:ring-[#ee3124] focus:border-[#ee3124] sm:text-sm/6 ${n.subfunction?"":"opacity-50 cursor-not-allowed"}`,children:[a.jsx("span",{className:"col-start-1 row-start-1 flex items-center gap-3 pr-6",children:a.jsx("span",{className:"block truncate",children:n.kra||(n.subfunction?"Select a KRA":"Select a subfunction first")})}),a.jsx(De,{"aria-hidden":"true",className:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-400 sm:size-4"})]}),a.jsx(xe,{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base border border-gray-200 shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:n.subfunction&&n.subfunction.job_profile_kras&&n.subfunction.job_profile_kras.length>0?n.subfunction.job_profile_kras.map(i=>a.jsxs(ge,{value:i.id,className:"group relative cursor-default py-2 pr-9 pl-3 text-gray-900 select-none data-focus:bg-red-50 data-focus:outline-none",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"ml-3 block truncate font-normal group-data-selected:font-semibold group-data-selected:text-[#ee3124]",children:i.kra})}),a.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-[#ee3124] group-not-data-selected:hidden group-data-focus:text-[#ee3124]",children:a.jsx(Ie,{"aria-hidden":"true",className:"size-5"})})]},i.id)):a.jsx("div",{className:"py-2 px-3 text-sm text-gray-500",children:"No KRAs available for this subfunction"})})]})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm/6 font-medium text-gray-700 mb-2",children:"KRA Description"}),a.jsx("textarea",{rows:2,value:n.description,onChange:i=>t({type:"UPDATE_KRA_FIELD",index:o,field:"description",value:i.target.value}),className:"block w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:ring-[#ee3124] focus:border-[#ee3124] px-3 py-2 shadow-sm sm:text-sm",placeholder:"Describe the key result area..."})]}),a.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"KRA Details"}),a.jsx("button",{type:"button",onClick:()=>t({type:"ADD_PROFILE_KRA",kraIndex:o}),className:"px-2.5 py-1 bg-gray-600 hover:bg-gray-700 text-white text-xs font-medium rounded-md transition",children:"+ KRA Details"})]}),n.profile_kra.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-md py-4 px-3 text-center",children:a.jsx("p",{className:"text-gray-400 text-xs",children:"No KRA descriptions added yet."})}):a.jsx("div",{className:"space-y-3",children:n.profile_kra.map((i,u)=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Detail #",u+1]}),a.jsx("button",{type:"button",onClick:()=>r({open:!0,title:"Remove KRA Detail",message:"This will remove this KRA detail. Do you want to continue?",onConfirm:()=>t({type:"REMOVE_PROFILE_KRA",kraIndex:o,profileIndex:u})}),className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Remove"})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Duties & Responsibilities"}),a.jsx("input",{type:"text",value:i.kra_description,onChange:c=>t({type:"UPDATE_PROFILE_KRA_FIELD",kraIndex:o,profileIndex:u,field:"kra_description",value:c.target.value}),className:"w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-[#ee3124] focus:ring-[#ee3124] px-2 py-1.5 shadow-sm text-xs",placeholder:"Provide a detailed description of a specific duty / responsibility under this KRA. (e.g., Gathers and analyzes relevant data to understand current business situation and industry factors.)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Deliverables"}),a.jsx("textarea",{rows:2,value:i.description,onChange:c=>t({type:"UPDATE_PROFILE_KRA_FIELD",kraIndex:o,profileIndex:u,field:"description",value:c.target.value}),className:"block w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:ring-[#ee3124] focus:border-[#ee3124] px-2 py-1.5 shadow-sm text-xs",placeholder:"Provide the corresponding output expected from this duty / responsibility, as applicable. (e.g., Business Report.)"})]})]},u))})]})]},o))})}const Le=({value:e,name:s,onChange:t,checked:r=!1,onOthersChange:n,othersValue:o=""})=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex h-6 shrink-0 items-center",children:a.jsxs("div",{className:"group grid size-4 grid-cols-",children:[a.jsx("input",{id:e,name:s,type:"checkbox","aria-describedby":"comments-description",value:e,checked:r,onChange:t,className:"col-start-1 row-start-1 w-5 h-5 appearance-none rounded-sm border-2 border-black/30 bg-white/5 checked:border-[#ee3124] checked:bg-[#ee3124] indeterminate:border-[#ee3124] indeterminate:bg-[#ee3124] focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#ee3124] disabled:border-white/5 disabled:bg-white/10 disabled:checked:bg-white/10 forced-colors:appearance-auto"}),a.jsxs("svg",{fill:"none",viewBox:"0 0 14 14",className:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-white/25",children:[a.jsx("path",{d:"M3 8L6 11L11 3.5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-0 group-has-checked:opacity-100"}),a.jsx("path",{d:"M3 7H11",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-0 group-has-indeterminate:opacity-100"})]})]})}),a.jsxs("div",{className:"text-sm/6",children:[a.jsx("label",{htmlFor:s,className:"block text-sm/6 font-medium text-gray-700",children:e}),e==="Others: "&&r&&a.jsx("div",{className:"mt-1",children:a.jsx("input",{type:"text",value:o,onChange:i=>n&&n(i.target.value),placeholder:"Please specify, separate items by comma.",className:"w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-[#ee3124] focus:ring-[#ee3124] px-3 py-2 shadow-sm sm:text-sm"})})]})]});function Br({performanceOptions:e,checkedValues:s,othersInputs:t,onToggle:r,onOthersChange:n}){const o=(i,u)=>s[i]?.includes(u)||!1;return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"md:col-span-full",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#ee3124] flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-1 h-6 bg-red-600 rounded-full"}),"Job Performance Standards"]}),a.jsxs("div",{className:"text-sm/6",children:[a.jsx("p",{className:"text-gray-400",children:"Number, Frequency, Percentage"}),a.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"(Please check all that apply)"})]})]}),["quantity","quality","time","cost"].map((i,u)=>a.jsxs("div",{className:"bg-white border border-gray-200 shadow-xl rounded-lg py-3 px-4",children:[a.jsxs("label",{className:"block text-sm/6 font-medium text-gray-700",children:[u+1,".0 ",i.charAt(0).toUpperCase()+i.slice(1)]}),e[i].map(c=>a.jsx("div",{className:"flex gap-3 mt-2",children:a.jsx(Le,{value:c,name:`${i}[]`,checked:o(i,c),onChange:()=>r(i,c)})},c)),a.jsx("div",{className:"flex gap-3 mt-2",children:a.jsx(Le,{value:"Others: ",name:`${i}[]`,checked:o(i,"Others: "),onChange:()=>r(i,"Others: "),onOthersChange:c=>n(i,c),othersValue:t[i]})})]},i))]})}function Vr({config:e,values:s,onChange:t}){return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"md:col-span-full mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#ee3124] flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-1 h-6 bg-red-600 rounded-full"}),"Reporting Relationships"]}),a.jsx("div",{className:"text-sm/6",children:a.jsx("p",{className:"text-gray-400",children:"Please indicate the position of superiors as and when applicable."})})]}),a.jsx("div",{className:"bg-white border border-gray-200 shadow-xl rounded-lg py-3 px-4 mb-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map((r,n)=>a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{htmlFor:`reporting-${r.type}`,className:"block text-sm/6 font-medium text-gray-700",children:[n+1,".0 ",r.label]}),a.jsx("div",{className:"relative mt-2",children:a.jsx("input",{id:`reporting-${r.type}`,name:`reporting-${r.type}`,type:"text",value:s[r.type],onChange:o=>t(r.type,o.target.value),className:"w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-[#ee3124] focus:ring-[#ee3124] px-3 py-2 shadow-sm sm:text-sm",placeholder:"e.g., Management Associate"})})]},r.type))})})]})}function qr({values:e,onChange:s}){const t=[{key:"lineAuthority",label:"Line Authority",placeholder:"Indicate roles of your direct reports. Separate items by comma."},{key:"staffAuthority",label:"Staff Authority",placeholder:"Indicate roles you have functional authority over. Separate items by comma."}];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"md:col-span-full mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#ee3124] flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-1 h-6 bg-red-600 rounded-full"}),"Levels of Authority"]}),a.jsx("div",{className:"text-sm/6",children:a.jsx("p",{className:"text-gray-400",children:"If line authority, please state the terminal accountability you have over specific functions/roles. If staff authority, please indicate the parties you provide professional, expert advice and service."})})]}),a.jsx("div",{className:"bg-white border border-gray-200 shadow-xl rounded-lg py-3 px-4 mb-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((r,n)=>a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{htmlFor:r.key,className:"block text-sm/6 font-medium text-gray-700",children:[n+1,".0 ",r.label]}),a.jsx("div",{className:"relative mt-2",children:a.jsx("textarea",{id:r.key,name:r.key,rows:3,value:e[r.key],onChange:o=>s(r.key,o.target.value),className:"block w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:ring-[#ee3124] focus:border-[#ee3124] px-3 py-2 shadow-sm sm:text-sm",placeholder:r.placeholder})})]},r.key))})})]})}function zr({values:e,onChange:s}){const t=[{key:"educationalBackground",label:"Educational Background",placeholder:"e.g., Bachelor's degree in..."},{key:"licenseRequirement",label:"License Requirement (if any)",placeholder:"e.g., Professional Engineer License..."},{key:"workExperience",label:"Years of Work Experience (Relevant to the Area of Professional Expertise)",placeholder:"e.g., 5+ years in..."}];return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:col-span-full mb-4",children:a.jsxs("h2",{className:"text-lg font-semibold text-[#ee3124] flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-1 h-6 bg-red-600 rounded-full"}),"Job Specifications"]})}),a.jsx("div",{className:"bg-white border border-gray-200 shadow-xl rounded-lg py-3 px-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.map((r,n)=>a.jsxs("div",{className:"md:col-span-1",children:[a.jsxs("label",{htmlFor:r.key,className:"block text-sm/6 font-medium text-gray-700",children:[n+1,".0 ",r.label]}),a.jsx("div",{className:"relative mt-2",children:a.jsx("textarea",{id:r.key,name:r.key,rows:3,value:e[r.key],onChange:o=>s(r.key,o.target.value),className:"block w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:ring-[#ee3124] focus:border-[#ee3124] px-3 py-2 shadow-sm sm:text-sm",placeholder:r.placeholder})})]},r.key))})})]})}function Jr({profileId:e,onSaved:s,onPrev:t,onNext:r,prevDisabled:n,nextDisabled:o}){const i=Kt(),[u,c]=l.useState(!0),[p,b]=l.useState(!1),[j,m]=l.useState(!1),[d,R]=l.useState(!1),[_,C]=l.useState([]),[y,$]=l.useState({open:!1,title:"Confirm",message:"Are you sure?",onConfirm:null}),[E,M]=l.useState({quantity:[],quality:[],time:[],cost:[]}),[P,z]=l.useState({quantity:"",quality:"",time:"",cost:""}),[k,B]=l.useReducer(Tr,Fr),H=l.useMemo(()=>({quantity:["Volume of Transactions","Output per manhour; per channel"],quality:["Accuracy and Completeness","Conformance to Agreed Standards","Favorable feedback of Clients"],time:["Processing Time","Turnaround Time","Time for Project Completion"],cost:["Overhead Expense","Operating Cost","Budget Variance","Project Cost Savings"]}),[]),v=l.useMemo(()=>[{type:"primary",label:"Primary/Direct Reporting Relationship"},{type:"secondary",label:"Funcitonal Reporting Relationship"},{type:"tertiary",label:"Administrative Reporting Relationship"}],[]);l.useEffect(()=>{let h=!0;const N=A=>typeof A=="string"?A.trim().toLowerCase():String(A||"").toLowerCase();return(async()=>{try{c(!0);const A=await qt(e);if(!h)return;if(A&&A.job_profile){const x=A.job_profile,I=(x.job_descriptions||[]).map(g=>({id:g.id,subfunction:g.subfunction||x.subfunction||null,kraId:typeof g.kra=="object"?g.kra?.id:g.kra,kra:typeof g.kra=="object"?g.kra?.kra:g.kra_description||"",description:g.description||"",profile_kra:Array.isArray(g.profile_kra)?g.profile_kra:[]}));if(B({type:"INIT",payload:{department:A.department||"",jobPurpose:x.job_purpose||"",reportingRelationships:{primary:x.reporting_relationships?.primary||"",secondary:x.reporting_relationships?.secondary||"",tertiary:x.reporting_relationships?.tertiary||""},levelsOfAuthority:{lineAuthority:x.levels_of_authority?.line_authority||"",staffAuthority:x.levels_of_authority?.staff_authority||""},jobSpecifications:{educationalBackground:x.job_specifications?.educational_background||"",licenseRequirement:x.job_specifications?.license_requirement||"",workExperience:x.job_specifications?.work_experience||""},kras:I}}),Array.isArray(x.job_performance_standards)){const g={quantity:[],quality:[],time:[],cost:[]},V={quantity:"",quality:"",time:"",cost:""};x.job_performance_standards.forEach(se=>{const Q=se.name;!g[Q]||!Array.isArray(se.values)||se.values.forEach(f=>{(H[Q]||[]).some(ne=>N(ne)===N(f))?g[Q].push(f):(g[Q].includes("Others: ")||g[Q].push("Others: "),V[Q]=V[Q]?`${V[Q]}, ${f}`:f)})}),M(g),z(V)}}}catch(A){console.error("Error fetching job profile for edit:",A)}finally{h&&c(!1)}})(),()=>{h=!1}},[e,H]),l.useEffect(()=>{(async()=>{try{if(k.department){const N=k.department,F=await zt(N);C(F)}}catch(N){console.error("Error fetching subfunctions:",N)}})()},[k.department]);const L=(h,N,F)=>B({type:"UPDATE_FIELD",payload:{section:h,field:N,value:F}}),U=()=>B({type:"ADD_KRA"}),W=(h,N)=>{M(F=>{const A=F[h]||[];return A.includes(N)?(N==="Others: "&&z(I=>({...I,[h]:""})),{...F,[h]:A.filter(I=>I!==N)}):{...F,[h]:[...A,N]}})},J=(h,N)=>z(F=>({...F,[h]:N}));async function w(){const h=Object.entries(E).reduce((x,[I,g])=>(x[I]=g.map(V=>V==="Others: "?P[I]||"":V).filter(Boolean),x),{}),N=["quantity","quality","time","cost"].map(x=>({name:x,values:h[x]||[]})),F=(k.kras||[]).map(x=>({...x.id?{id:x.id}:{},subfunction:x.subfunction||null,kra:x.kraId||null,description:x.description||"",profile_kra:(x.profile_kra||[]).map(I=>({...I.id?{id:I.id}:{},kra_description:I.kra_description||"",description:I.description||""}))})),A={org_structure_id:Number(e),job_purpose:k.jobPurpose||"",job_performance_standards:N,reporting_relationships:{primary:k.reportingRelationships.primary||"",secondary:k.reportingRelationships.secondary||"",tertiary:k.reportingRelationships.tertiary||""},levels_of_authority:{line_authority:k.levelsOfAuthority.lineAuthority||"",staff_authority:k.levelsOfAuthority.staffAuthority||""},job_specifications:{educational_background:k.jobSpecifications.educationalBackground||"",license_requirement:k.jobSpecifications.licenseRequirement||"",work_experience:k.jobSpecifications.workExperience||""},job_descriptions:F};b(!0);try{await Ut(A),s&&s(),m(!0)}catch(x){console.error("Failed to save profile:",x)}finally{b(!1)}}return u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsxs(a.Fragment,{children:[a.jsx(Bt,{open:y.open,title:y.title,message:y.message,onCancel:()=>$(h=>({...h,open:!1})),onConfirm:()=>{typeof y.onConfirm=="function"&&y.onConfirm(),$(h=>({...h,open:!1}))},confirmLabel:"Delete"}),a.jsx(Vt,{isOpen:j,onClose:()=>{m(!1),i(-1)},title:"Job Profile Saved",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-700",children:"Your job profile has been saved successfully."}),a.jsx("div",{className:"flex justify-end gap-2",children:a.jsx("button",{type:"button",onClick:()=>{m(!1),i(-1)},className:"px-5 py-2 bg-[#ee3124] text-white rounded-md hover:bg-red-600",children:"Go to My Profile"})})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-6",children:a.jsxs("div",{className:"col-span-full",children:[a.jsx("label",{htmlFor:"jobPurpose",className:"block text-sm/6 font-medium text-gray-700",children:"Job Purpose"}),a.jsx("div",{className:"mt-2",children:a.jsx("textarea",{id:"jobPurpose",rows:3,value:k.jobPurpose,onChange:h=>L(null,"jobPurpose",h.target.value),className:"block w-full rounded-md bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:ring-[#ee3124] focus:border-[#ee3124] px-3 py-2 shadow-sm sm:text-sm",placeholder:"Describe the main purpose and objectives of this role: Why does this job exist in the organization in the first place?"})})]})}),a.jsx("div",{className:"md:col-span-full mb-4 mt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#ee3124] flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-1 h-6 bg-red-600 rounded-full"}),"Key Result Areas (KRA)"]}),a.jsx("button",{type:"button",onClick:U,className:"px-3 py-1.5 bg-[#ee3124] hover:bg-red-600 text-white text-sm font-medium rounded-md transition",children:"+ Add KRA"})]})}),k.kras.length===0?a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-8 px-4 text-center mb-6",children:a.jsx("p",{className:"text-gray-500 text-sm",children:'No KRAs added yet. Click "Add KRA" to get started.'})}):a.jsx(Kr,{kras:k.kras,subfunctions:_,dispatch:B,onAddKRA:U,openConfirm:y,setOpenConfirm:$}),a.jsx(Br,{performanceOptions:H,checkedValues:E,othersInputs:P,onToggle:W,onOthersChange:J}),a.jsx(Vr,{config:v,values:k.reportingRelationships,onChange:(h,N)=>L("reportingRelationships",h,N)}),a.jsx(qr,{values:k.levelsOfAuthority,onChange:(h,N)=>L("levelsOfAuthority",h,N)}),a.jsx(zr,{values:k.jobSpecifications,onChange:(h,N)=>L("jobSpecifications",h,N)}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-4 px-4 mt-6",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:h=>R(h.target.checked),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#ee3124] focus:ring-[#ee3124] cursor-pointer"}),a.jsx("span",{className:"text-sm text-gray-700",children:"I have read and fully understood my Job Profile and the related duties and responsibilities. I agree to fulfill the requirements of the job to the best of my knowledge and ability."})]})}),a.jsx(Ht,{onPrev:t,onNext:r,prevDisabled:n,nextDisabled:o,onSave:w,saving:p,saveDisabled:!d,saveLabel:"Save Job Profile",rightContent:d?null:a.jsx("span",{className:"text-xs text-gray-500",children:"Please agree to the statement to enable saving."})})]})}export{Jr as default};
